<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EstimaCr√©dit - R√©sultat</title>

  <!----------------------------------------------------TAILWIND---------------------------------------------------->
  <link rel="stylesheet" href="src/output.css">

  <!----------------------------------------------------CHART.JS---------------------------------------------------->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!----------------------------------------------------IC√îNES---------------------------------------------------->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

</head>

<body class="bg-neutral-900 flex flex-col min-h-screen text-gray-900">

  <!----------------------------------------------------------HEADER----------------------------------------------------------->
  <header class="bg-white shadow-md sticky top-0 z-50">
    <nav class="flex items-center justify-between px-6 py-3">

      <!--------------------------------------------------LOGO ESTIMACR√âDIT-------------------------------------------------->
      <a href="index.html">
        <img src="images/Logo.png" alt="Logo du site" class="w-40 md:w-32">
      </a>

      <!--------------------------------------------------MENU MOBILE-------------------------------------------------->
      <div class="md:hidden">
        <input type="checkbox" id="menu" class="hidden peer">
        <label for="menu" class="cursor-pointer">
          <img src="images/menu.png" alt="Menu" class="w-7 h-7">
        </label>

        <menu
          class="hidden peer-checked:flex absolute top-14 right-4 bg-[#0d1b2a] text-white rounded-lg shadow-lg flex-col gap-3 p-4 w-56">
          <label for="menu" class="text-right cursor-pointer text-lg flex justify-center items-center">‚úñ</label>

          <a href="index.html"
            class="px-4 py-2 bg-[#e2e8f0] rounded-lg text-[#1b2a41] font-medium hover:bg-[#0d1b2a] hover:text-white transition duration-300">
            Accueil
          </a>
          <a href="Simulation.html"
            class="px-4 py-2 bg-[#e2e8f0] rounded-lg text-[#1b2a41] font-medium hover:bg-[#0d1b2a] hover:text-white transition duration-300">
            Simulation
          </a>
          <a href="#R√©sultat"
            class="px-4 py-2 bg-[#e2e8f0] rounded-lg text-[#1b2a41] font-medium hover:bg-[#0d1b2a] hover:text-white transition duration-300">
            R√©sultats
          </a>
          <a href="A-Propos.html"
            class="px-4 py-2 bg-[#e2e8f0] rounded-lg text-[#1b2a41] font-medium hover:bg-[#0d1b2a] hover:text-white transition duration-300">
            √Ä propos
          </a>
        </menu>
      </div>

      <!--------------------------------------------------MENU DESKTOP-------------------------------------------------->
      <menu class="hidden md:flex items-center gap-6 text-green-800 font-semibold">
        <a href="index.html"
          class="px-4 py-2 bg-[#e2e8f0] rounded-lg text-[#1b2a41] font-medium hover:bg-[#0d1b2a] hover:text-white transition duration-300">
          Accueil
        </a>
        <a href="Simulation.html"
          class="px-4 py-2 bg-[#e2e8f0] rounded-lg text-[#1b2a41] font-medium hover:bg-[#0d1b2a] hover:text-white transition duration-300">
          Simulation
        </a>
        <a href="#R√©sultat"
          class="px-4 py-2 bg-[#e2e8f0] rounded-lg text-[#1b2a41] font-medium hover:bg-[#0d1b2a] hover:text-white transition duration-300">
          R√©sultats
        </a>
        <a href="A-Propos.html"
          class="px-4 py-2 bg-[#e2e8f0] rounded-lg text-[#1b2a41] font-medium hover:bg-[#0d1b2a] hover:text-white transition duration-300">
          √Ä propos
        </a>
      </menu>
    </nav>
  </header>

  <!--------------------------------------------------CONTENU PRINCIPAL-------------------------------------------------->
  <main class="flex-grow flex justify-center items-center bg-gray-100 py-6">
    <div class="bg-[#b6c7db] rounded-2xl shadow-lg p-6 w-[520px] text-left border border-gray-700">

      <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
        <i class="fa-solid fa-chart-pie"></i> D√âTAIL DE MA SIMULATION
      </h2>

      <div id="resultat" class="text-gray-800 text-[15px] leading-relaxed">
        <p>Chargement des r√©sultats...</p>
      </div>

      <!--------------------------------------------------GRAPH-------------------------------------------------->
      <div class="flex justify-center mt-6">
        <canvas id="chart" width="250" height="250"></canvas>
      </div>

      <!--------------------------------------------------BOUTONS-------------------------------------------------->
      <div class="flex justify-between mt-6">
        <a href="Simulation.html"
          class="bg-gray-700 text-white text-sm w-[200px] px-3 py-2 rounded-md hover:bg-gray-800 text-center transition">
          Refaire ma simulation
        </a>

        <a href="Consseil-d-or.html"
          class="bg-gray-700 text-white text-sm w-[200px] px-3 py-2 rounded-md hover:bg-yellow-500 text-center transition">
          Conseil d'or
        </a>
      </div>
    </div>
  </main>

  <!--------------------------------------------------FOOTER-------------------------------------------------->
  <footer class="bg-[#0d1b2a] text-center text-[#e0e1dd] py-4 text-sm">
    <p class="font-semibold">EstimaCr√©dit</p>
    <p>Simulateur de pr√™t intelligent ‚Äì Planifiez votre avenir financier üí∞</p>
    <p>¬© 2025 EstimaCr√©dit. Tous droits r√©serv√©s. | R√©alis√© avec  par [Med_kr]</p>
  </footer>

  <!-------------------------------------------------- JS-------------------------------------------------->
  <script>
    const data = JSON.parse(localStorage.getItem("resultatPret"));
    const zoneResultat = document.getElementById("resultat");
    const ctx = document.getElementById('chart').getContext('2d');

    if (data) {
      zoneResultat.innerHTML = `
        <p><span class="font-semibold underline">Type de pr√™t :</span> ${data.typePret}</p>
        <p><span class="font-semibold underline">Montant demand√© :</span> ${data.montant.toLocaleString()} DH</p>
        <p><span class="font-semibold underline">Dur√©e :</span> ${data.duree} ans</p>
        <p><span class="font-semibold underline">Taux appliqu√© :</span> ${data.taux}%</p>
        <p><span class="font-semibold underline">Mensualit√© :</span> ${data.mensualite.toFixed(2).toLocaleString()} DH</p>
        <p><span class="font-semibold underline">Total des int√©r√™ts :</span> ${data.interets.toFixed(2).toLocaleString()} DH</p>
        <p><span class="font-semibold underline">Montant total √† rembourser :</span> ${data.total.toFixed(2).toLocaleString()} DH</p>
      `;

    /*-------------------------------------------------- GRAPH --------------------------------------------------*/

      new Chart(ctx, {
        type: 'pie',
        data: {
          labels: ['Int√©r√™ts', 'Capital'],
          datasets: [{
            data: [data.interets, data.montant],
            backgroundColor: ['#2c3e50', '#5d6d7e'],
            borderColor: '#fff',
            borderWidth: 2
          }]
        },
        options: {
          plugins: {
            legend: {
              position: 'bottom',
              labels: {
                color: '#1b2a41',
                font: { size: 14 }
              }
            }
          }
        }
      });
    } else {
      zoneResultat.innerHTML = `<p class='text-red-700 font-semibold'>Aucune donn√©e trouv√©e. Veuillez refaire une simulation.</p>`;
    }
  </script>

</body>
</html>
